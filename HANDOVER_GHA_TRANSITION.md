# 引き継ぎノート (HANDOVER_20260217_GHA_TRANSITION.md)

## 作業内容
### 完了したこと
- **環境再構築の計画策定**: リソース制限下でのシリアルビルドによる環境復旧を計画・承認。
- **ローカル環境のクリーンアップ**: 既存 of コンテナおよびイメージの削除を実施。
- **ビルドの試行一次（制限有り）**: `1CPU/2GB` 制限下で `src/build_serial.sh` を実行。結果、極端な低速化により進捗が確認できず。
- **ビルドの試行二次（制限無し）**: 処理速度向上のため制限を緩和して実行。結果、I/O飽和によるシステムコマンド（`ls`, `ps`, `podman`等）のブロッキング（Livelock状態）が発生。

### 対応中のこと
- **方針の転換**: ローカルビルドを断念し、GitHub Actions を用いたビルド・検証フェーズへの移行を検討中。

### 未対応のこと
- **GitHub Actionsの設定**: `Phase 5` で予定していたデプロイパイプラインの構築を前倒しし、検証用に整備すること。

## 決定事項・設計方針
- **ビルド戦略**: ローカル（リソース制限環境）でのビルドは実行困難と判断。今後はリモート環境（GitHub Actions）での検証をデフォルトとする。
- **検証場所**: ユーザーによるブラウザ操作確認の前に、まずCI上でのビルド成功を担保する。

## 発生した問題と対応
### 問題: ローカルビルド中のシステムコマンド応答停止
- **原因**: Podman のビルドプロセスがディスクI/Oまたは特定のシステムコールを独占し、他のプロセスが待機状態になる Livelock が発生。
- **対応**: マシンの再起動を決定。ビルド環境をローカルから GitHub Actions へ移す方針に変更。
- **結果**: OSの完全なフリーズは回避したが、検証に必要なプロセスの完遂には至らなかった。

## 学んだこと
- 依存関係の多いNode.jsプロジェクトのビルドは、シリアル（順次）実行であっても、I/O性能がボトルネックとなりシステム全体を停滞させる可能性がある。
- リソース制限（CPU/メモリ）だけではディスクI/Oの競合（Livelock）は防ぎきれない場合があり、早期にリモートCIへの切り替えを判断することも重要。

## 次回セッションへのメモ
- マシン再起動後、Podman関連の残骸がないか確認。
- GitHub Actions のワークフロー（`.github/workflows/...`）を作成し、`src/` 配下の全イメージのビルドを確認する。
